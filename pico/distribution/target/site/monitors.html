<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>PicoContainer - Monitoring Component Events</title>

<style type="text/css" media="all">
@import url("./style/pico.css");

@import url("./style/syntaxhighlighter.css");
</style>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
	
</script>
<script type="text/javascript">
	_uacct = "UA-2268879-1";
	urchinTracker();
</script>
<script type="text/javascript" src="./js/prototype.js">
	//
</script>
<meta name="verify-v1" content="UsIBiaQhhmjFrBwcJ2n4XIvEImPNG4SMVP365rRcpxE=" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
</head>

<body class="composite">
<div id="banner"><span style="font-size: 72px; font-family: Geneva; font-weight: bold;"><img
  src="images/pico-logo.png" alt="" /> <span style="color: rgb(58, 150, 27);">Pico</span><span
  style="color: rgb(131, 131, 131);">Container</span></span>
<div class="clear"></div>
</div>
<div id="breadcrumbs">
<div class="left">Latest Released Version: 2.10.2</div>
<div class="clear"></div>
</div>

<div id="leftColumn">
<div id="navColumn">
<h1>About</h1>
<ul>
     <li><a href="index.html">What is PicoContainer?</a></li>
      <li><a href="introduction.html">Introduction</a></li>
      <li><a href="javadoc.html">Javadoc</a></li>
      <li><a href="downloads.html">Downloads</a></li>
      <li><a href="news.html">News</a></li>
      <li><a href="faq.html">FAQ</a></li>
      <li><a href="goals.html">Project Goals</a></li>
      <li><a href="support.html">Support</a></li>
   
</ul>

<h1>Core Concepts</h1>
<ul>
     <li><a href="lifecycle.html">Component Lifecycle</a></li>
      <li><a href="injection.html">Dependency Injection</a></li>
      <li><a href="scopes.html">Scoped Containers</a></li>
   
</ul>

<h1>Dependency Injection</h1>
<ul>
     <li><a href="constructor-injection.html">Constructor Injection</a></li>
      <li><a href="setter-injection.html">Setter Injection</a></li>
      <li><a href="annotated-field-injection.html">Annotated Field Injection</a></li>
      <li><a href="annotated-method-injection.html">Annotated Method Injection</a></li>
      <li><a href="typed-field-injection.html">Typed Field Injection</a></li>
      <li><a href="named-field-injection.html">Named Field Injection</a></li>
      <li><a href="method-injection.html">Method Injection</a></li>
      <li><a href="named-method-injection.html">Named Method Injection</a></li>
      <li><a href="multi-injection.html">Multiple Injection</a></li>
      <li><a href="composite-injection.html">Composite Injection</a></li>
      <li><a href="factory-injection.html">Factory Injection</a></li>
      <li><a href="reinjection.html">Reinjection</a></li>
      <li><a href="providers.html">Injection via Providers</a></li>
   
</ul>

<h1>Configuration</h1>
<ul>
     <li><a href="disambiguation.html">Disambiguation</a></li>
   
</ul>

<h1>Modifying Component Behaviors</h1>
<ul>
     <li><a href="behaviors.html">Behaviors Overview</a></li>
      <li><a href="caching.html">Caching and Singletons</a></li>
      <li><a href="hiding.html">Hiding Implementations</a></li>
      <li><a href="thread-safety.html">Thread Safety Behaviors</a></li>
      <li><a href="interception.html">AOP Style Interception</a></li>
      <li><a href="other-behaviors.html">Other Behaviors</a></li>
   
</ul>

<h1>Advanced Concepts</h1>
<ul>
     <li><a href="fluent-style.html">Fluent Style</a></li>
      <li><a href="arrays-collections-and-maps.html">Arrays, Collections and Maps</a></li>
      <li><a href="parameter-names.html">Leveraging Parameter Names</a></li>
      <li><a href="builder.html">Building Containers</a></li>
      <li><a href="properties.html">Component Properties</a></li>
      <li><a href="converters.html">Converters</a></li>
      <li><a href="component-configuration.html">Component Configuration</a></li>
    
  <li class="currentLink">Monitoring Component Events</li>
    <li><a href="regex.html">Regex Composer</a></li>
   
</ul>

<h1>PicoContainer's Architecture</h1>
<ul>
     <li><a href="patterns.html">Design Patterns</a></li>
      <li><a href="inversion-of-control.html">Inversion of Control</a></li>
      <li><a href="adapters.html">Component Adapters</a></li>
      <li><a href="mock-objects.html">Mock Objects</a></li>
      <li><a href="terminology.html">Terminology</a></li>
      <li><a href="comparisons.html">Container Comparisons</a></li>
      <li><a href="transparency.html">Transparency</a></li>
   
</ul>

<h1>Container Choices</h1>
<ul>
     <li><a href="DefaultPicoContainer.html">DefaultPicoContainer</a></li>
      <li><a href="CommandLinePicoContainer.html">CommandLinePicoContainer</a></li>
      <li><a href="PropertiesPicoContainer.html">PropertiesPicoContainer</a></li>
      <li><a href="SystemPropertiesPicoContainer.html">SystemPropertiesPicoContainer</a></li>
      <li><a href="TransientPicoContainer.html">TransientPicoContainer</a></li>
      <li><a href="TieringPicoContainer.html">TieringPicoContainer</a></li>
   
</ul>

<h1>Dependant & Related</h1>
<ul>
     <li><a href="http://picocontainer.org/web">Web Frameworks</a></li>
      <li><a href="http://picocontainer.org/script">Scripting Support</a></li>
      <li><a href="http://picocontainer.org/persistence">Persistence</a></li>
      <li><a href="http://picocontainer.org/logging">Logging</a></li>
   
</ul>

<h1>Anti-patterns</h1>
<ul>
     <li><a href="propagating-dependency-antipattern.html">Propagating Dependency</a></li>
      <li><a href="long-constructor-argument-list-antipattern.html">Long Constructor Argument List</a></li>
      <li><a href="container-dependency-antipattern.html">Container Dependency</a></li>
      <li><a href="tests-use-container-antipattern.html">Unit Tests Use Container</a></li>
      <li><a href="singleton-antipattern.html">Singleton</a></li>
   
</ul>

<h1>Help Pages</h1>
<ul>
     <li><a href="ambiguous-injectable-help.html">Ambiguous Injectable</a></li>
      <li><a href="unprocessed-properties-help.html">Unprocessed Properties</a></li>
   
</ul>

<h1>History</h1>
<ul>
     <li><a href="inversion-of-control-history.html">Inversion of Control History</a></li>
   
</ul>

<h1>Project Info</h1>
<ul>
     <li><a href="project.html">Project</a></li>
      <li><a href="team.html">Team</a></li>
   
</ul>
<h1>Hosted by</h1>
<img alt="Hosted at Codehaus" src="images/codehaus-small.gif" width="120" height="40" /><br />
<h1>Tools</h1>
<img alt="Maven" src="images/maven-feather.png" /> <br />
<img alt="Eclipse" src="images/eclipse-logo-white.jpg" width="100" height="40" /> <br />
<img alt="IDEA" src="images/idea88x31_white.gif" /> <br />
</div>
</div>
<div id="bodyColumn">
<div id="contentBox">
<div class="section">
<h2>Monitoring Component Events</h2>

<p>A ComponentMonitor if injected into DefultPicoContainer allows for certain events to be monitored for the whole
    container. These are:</p>
<ul>
    <li>instantiating - referring to a component</li>
    <li>instantiated - referring to a component</li>
    <li>instantiationFailed - referring to a component</li>
    <li>invoking - referring to a method on a component</li>
    <li>invoked - referring to a method on a component</li>
    <li>invocationFailed - referring to a method on a component</li>
    <li>lifecycleInvocationFailed - referring to start/stop/dispose methods on a component</li>
    <li>noComponentFound - referring to getComponent(..) on a PicoContainer instance.</li>
</ul>
<p>Refer to the <a href="http://picocontainer.org/javadoc/core/org/picocontainer/ComponentMonitor.html">API
    documentation</a> for ComponentMonitor.
</p>

<p>Using a ComponentMonitor is quite easy, you pass it into the constructor of DefaultPicoContainer. It will also be
    passed to child containers:</p>

<div class="source">
<pre>parent = new DefaultPicoContainer(new MyComponentMonitor());
child = parent.makeChildContainer(); // will use the same monitor impl.
...
public class MyComponentMonitor implements ComponentMonitor {
	// etc
}
</pre>
</div>
<h2>Making your own ComponentMonitor implementation</h2>

<h3>Return Values </h3>

<p><em>Instantiating</em> returns a Constructor. An implementor of ComponentMonitor can choose to return a different
    Constructor reference. This is one way that implementations can be replaced or decorated (AOP style) with
    additional/changed functionality. </p>

<p><em>noComponentFound</em> returns an Object (default of null in most cases). An implementor can choose to return an
    instance instead. That instance should be of a type that makes sense to the component that was being sought. The
    getComponent(..) would have otherwise failed, but this hypothetical ComponentMonitor intercepted that failure and
    provided something that makes sense. </p>

<h3>General rules</h3>

<ol>
    <li>ComponentMonitor can generally be chained together. Meaning you can use them in combination.</li>
    <li>Most have NullComponentMonitor (see below) as their end stop.</li>
    <li>Any method on ComponentMonitor is open for interpretation. That means they can throw exceptions as well as
        return different values, making them modify PicoContainer's behavior.
    </li>
</ol>
<br/>
<h2>Supplied ComponentMonitor implementations</h2>

<h3>Logging or text-centric varieties of ComponentMonitor </h3>

<p> The PicoContainer team are ideologically opposed to a forced choice of logging framework. If you're hell bent on
    logging, chose from a ComponentMonitor implementation below:</p>

<ul>
    <li>
        <a href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/CommonsLoggingComponentMonitor.html">CommonsLoggingComponentMonitor</a>
        (Gems) // uses Apache's Commons-Logging
    </li>
    <li><a href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/Log4JComponentMonitor.html">Log4JComponentMonitor</a>
        (Gems) // uses Apache's Log4J
    </li>
    <li><a href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/Slf4jComponentMonitor.html">Slf4jComponentMonitor</a>
        (Gems) // uses Simple Logging Framework for Java (SLF4J)
    </li>
    <li><a href="http://picocontainer.org/javadoc/core/org/picocontainer/monitors/ConsoleComponentMonitor.html">ConsoleComponentMonitor</a>
        // prints to System.out
    </li>
    <li><a href="http://picocontainer.org/javadoc/core/org/picocontainer/monitors/WriterComponentMonitor.html">WriterComponentMonitor</a>
        // prints to a supplied OutputStream
    </li>
</ul>

<h3>NullComponentMonitor</h3>

<p><a href="http://picocontainer.org/javadoc/core/org/picocontainer/monitors/NullComponentMonitor.html">NullComponentMonitor</a>
    is PicoContainer's default ComponentMonitor. It generally fits the NullObject pattern, but it does add behavior.
    Specifically if it encounters a lifecycleInvocationFailed(..) method invocation, it throws a PicoLifecycleException
    in response. If you use something other than NullComponentMonitor (bear in mind the default 'end stop' for most
    others is also NullComponentMonitor) then you could change the way PicoContainer responds to components it cannot
    start, stop of dispose of. </p>

<h3>LifecycleComponentMonitor</h3>

<p><a href="http://picocontainer.org/javadoc/core/org/picocontainer/monitors/LifecycleComponentMonitor.html">LifecycleComponentMonitor</a>
    is a ComponentMonitor that stores life-cycle failures and rethrows them later if rethrowLifecycleFailuresException()
    is called. </p>

<h3>DotDependencyGraphComponentMonitor (Gems)</h3>

<p>
    <a href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/DotDependencyGraphComponentMonitor.html">DotDependencyGraphComponentMonitor</a>
    is a ComponentMonitor that makes a dot graph for instantiations of components. You would use it to visualize a graph
    of the injections in a container or tree of PicoContainers after they have run for some time. Call
    getClassDependencyGraph() on the monitor instance when you are ready to retrieve the Dot representation. See the <a
        href="http://www.graphviz.org/">Graphviz</a> website for applications that can read the .dot format and
    visualize.</p>

<h3>Prefuse (Gems)</h3>

<p>In a similar way to the DotDependencyGraph above a visualization using <a href="http://prefuse.org/">Prefuse</a> is
    possible by coupling a <a
        href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/prefuse/PrefuseDependencyGraph.html">PrefuseDependencyGraph</a>
    instance to a <a
        href="http://picocontainer.org/javadoc/gems/org/picocontainer/gems/monitors/ComponentDependencyMonitor.html">ComponentDependencyMonitor</a>
    one. Call getGraph() to retrieve the graph for use with Prefuse</p>
<br/>
<h2><a name="composers">Composers</a></h2>

	<p>ComposingMonitor is an implementation of the Monitor design that works specifically in conjunction with noComponentFound(..) to allow greater collaboration in the supply of components for the purposes of injection.  By definition it is only going to work if the type or object key that's required is missing from the container.</p>

<div class="source">
<pre>MutablePicoContainer pico = new DefaultPicoContainer(new ComposingMonitor( /* varargs of composer instances */));
</pre>
</div>
<p>If more than one is specified in the varargs above, then the first in the list to actually return non-null will be used.  It is also possible for a fallback component monitor to be specified:</p>
<div class="source">
<pre>ComponentMonitor otherCM = ...
MutablePicoContainer pico = new DefaultPicoContainer(new ComposingMonitor(otherCM, /* varargs of composer instances */));
</pre>
</div>
<p>See <a href="regex.html">Regex Composer</a></p>	
<h2>Future work</h2>

	<p>Implementations that:</p>
	<ul>
	    <li>Record component injections and play them back later (optimized web frameworks)</li>
	</ul>

</div>
</div>
</div>
<div class="clear"></div>
<div id="footer">
<div class="right">&#169; 2003-2008 PicoContainer Committers</div>
<div class="clear"></div>
</div>

</body>

<!--  Scripts to highlight code:  MUST be left AFTER the body -->
<script language="javascript" src="./js/shCore.js">
	//
</script>
<script language="javascript" src="./js/shBrushJava.js">
	//
</script>
<script language="javascript" src="./js/shBrushXml.js">
	//
</script>
<script type="text/javascript">
	// <![CDATA[
	var elements = document.getElementsByClassName('source');
	elements.each( function(element) {
		var content = element.getElementsByTagName('pre')[0].innerHTML;
		var classType = /^&lt;/.test(content) ? "xml" : "java";
		content = "<textarea name=\"code\" class=\"" + classType + "\">"
				+ content + "</textarea>";
		new Insertion.Before(element, content);
		element.remove(element);
	});

	dp.SyntaxHighlighter.HighlightAll('code', false, false);
	// ]]>
</script>

</html>
