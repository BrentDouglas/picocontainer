<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>PicoContainer - Component Lifecycle</title>

<style type="text/css" media="all">
@import url("./style/pico.css");

@import url("./style/syntaxhighlighter.css");
</style>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
	
</script>
<script type="text/javascript">
	_uacct = "UA-2268879-1";
	urchinTracker();
</script>
<script type="text/javascript" src="./js/prototype.js">
	//
</script>
<meta name="verify-v1" content="UsIBiaQhhmjFrBwcJ2n4XIvEImPNG4SMVP365rRcpxE=" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
</head>

<body class="composite">
<div id="banner"><span style="font-size: 72px; font-family: Geneva; font-weight: bold;"><img
  src="images/pico-logo.png" alt="" /> <span style="color: rgb(58, 150, 27);">Pico</span><span
  style="color: rgb(131, 131, 131);">Container</span></span>
<div class="clear"></div>
</div>
<div id="breadcrumbs">
<div class="left">Latest Released Version: 2.10.2</div>
<div class="clear"></div>
</div>

<div id="leftColumn">
<div id="navColumn">
<h1>About</h1>
<ul>
     <li><a href="index.html">What is PicoContainer?</a></li>
      <li><a href="introduction.html">Introduction</a></li>
      <li><a href="javadoc.html">Javadoc</a></li>
      <li><a href="downloads.html">Downloads</a></li>
      <li><a href="news.html">News</a></li>
      <li><a href="faq.html">FAQ</a></li>
      <li><a href="goals.html">Project Goals</a></li>
      <li><a href="support.html">Support</a></li>
   
</ul>

<h1>Core Concepts</h1>
<ul>
   
  <li class="currentLink">Component Lifecycle</li>
    <li><a href="injection.html">Dependency Injection</a></li>
      <li><a href="scopes.html">Scoped Containers</a></li>
   
</ul>

<h1>Dependency Injection</h1>
<ul>
     <li><a href="constructor-injection.html">Constructor Injection</a></li>
      <li><a href="setter-injection.html">Setter Injection</a></li>
      <li><a href="annotated-field-injection.html">Annotated Field Injection</a></li>
      <li><a href="annotated-method-injection.html">Annotated Method Injection</a></li>
      <li><a href="typed-field-injection.html">Typed Field Injection</a></li>
      <li><a href="named-field-injection.html">Named Field Injection</a></li>
      <li><a href="method-injection.html">Method Injection</a></li>
      <li><a href="named-method-injection.html">Named Method Injection</a></li>
      <li><a href="multi-injection.html">Multiple Injection</a></li>
      <li><a href="composite-injection.html">Composite Injection</a></li>
      <li><a href="factory-injection.html">Factory Injection</a></li>
      <li><a href="reinjection.html">Reinjection</a></li>
      <li><a href="providers.html">Injection via Providers</a></li>
   
</ul>

<h1>Configuration</h1>
<ul>
     <li><a href="disambiguation.html">Disambiguation</a></li>
   
</ul>

<h1>Modifying Component Behaviors</h1>
<ul>
     <li><a href="behaviors.html">Behaviors Overview</a></li>
      <li><a href="caching.html">Caching and Singletons</a></li>
      <li><a href="hiding.html">Hiding Implementations</a></li>
      <li><a href="thread-safety.html">Thread Safety Behaviors</a></li>
      <li><a href="interception.html">AOP Style Interception</a></li>
      <li><a href="other-behaviors.html">Other Behaviors</a></li>
   
</ul>

<h1>Advanced Concepts</h1>
<ul>
     <li><a href="fluent-style.html">Fluent Style</a></li>
      <li><a href="arrays-collections-and-maps.html">Arrays, Collections and Maps</a></li>
      <li><a href="parameter-names.html">Leveraging Parameter Names</a></li>
      <li><a href="builder.html">Building Containers</a></li>
      <li><a href="properties.html">Component Properties</a></li>
      <li><a href="converters.html">Converters</a></li>
      <li><a href="component-configuration.html">Component Configuration</a></li>
      <li><a href="monitors.html">Monitoring Component Events</a></li>
      <li><a href="regex.html">Regex Composer</a></li>
   
</ul>

<h1>PicoContainer's Architecture</h1>
<ul>
     <li><a href="patterns.html">Design Patterns</a></li>
      <li><a href="inversion-of-control.html">Inversion of Control</a></li>
      <li><a href="adapters.html">Component Adapters</a></li>
      <li><a href="mock-objects.html">Mock Objects</a></li>
      <li><a href="terminology.html">Terminology</a></li>
      <li><a href="comparisons.html">Container Comparisons</a></li>
      <li><a href="transparency.html">Transparency</a></li>
   
</ul>

<h1>Container Choices</h1>
<ul>
     <li><a href="DefaultPicoContainer.html">DefaultPicoContainer</a></li>
      <li><a href="CommandLinePicoContainer.html">CommandLinePicoContainer</a></li>
      <li><a href="PropertiesPicoContainer.html">PropertiesPicoContainer</a></li>
      <li><a href="SystemPropertiesPicoContainer.html">SystemPropertiesPicoContainer</a></li>
      <li><a href="TransientPicoContainer.html">TransientPicoContainer</a></li>
      <li><a href="TieringPicoContainer.html">TieringPicoContainer</a></li>
   
</ul>

<h1>Dependant & Related</h1>
<ul>
     <li><a href="http://picocontainer.org/web">Web Frameworks</a></li>
      <li><a href="http://picocontainer.org/script">Scripting Support</a></li>
      <li><a href="http://picocontainer.org/persistence">Persistence</a></li>
      <li><a href="http://picocontainer.org/logging">Logging</a></li>
   
</ul>

<h1>Anti-patterns</h1>
<ul>
     <li><a href="propagating-dependency-antipattern.html">Propagating Dependency</a></li>
      <li><a href="long-constructor-argument-list-antipattern.html">Long Constructor Argument List</a></li>
      <li><a href="container-dependency-antipattern.html">Container Dependency</a></li>
      <li><a href="tests-use-container-antipattern.html">Unit Tests Use Container</a></li>
      <li><a href="singleton-antipattern.html">Singleton</a></li>
   
</ul>

<h1>Help Pages</h1>
<ul>
     <li><a href="ambiguous-injectable-help.html">Ambiguous Injectable</a></li>
      <li><a href="unprocessed-properties-help.html">Unprocessed Properties</a></li>
   
</ul>

<h1>History</h1>
<ul>
     <li><a href="inversion-of-control-history.html">Inversion of Control History</a></li>
   
</ul>

<h1>Project Info</h1>
<ul>
     <li><a href="project.html">Project</a></li>
      <li><a href="team.html">Team</a></li>
   
</ul>
<h1>Hosted by</h1>
<img alt="Hosted at Codehaus" src="images/codehaus-small.gif" width="120" height="40" /><br />
<h1>Tools</h1>
<img alt="Maven" src="images/maven-feather.png" /> <br />
<img alt="Eclipse" src="images/eclipse-logo-white.jpg" width="100" height="40" /> <br />
<img alt="IDEA" src="images/idea88x31_white.gif" /> <br />
</div>
</div>
<div id="bodyColumn">
<div id="contentBox">
<div class="section">
<h2>Component Lifecycle</h2>

<p>Inversion of Control is three things: component dependencies and configuration, but also Component Lifecycle.</p>

<p>After instantiation, if the component warrants it, a 'start'
    stage may be required. More specifically, if a container has injected
    and instantiated all components in a set, one or more of them may
    require starting in the same order they were instantiated. Later, in
    reverse order, the same component(s) may require stopping. In fact start
    and stop may happen more than one for the life of an application.
    Disposal may happen once only, before the component is eligible for
    garbage collection.</p>

<p><strong>Lifecycle is really only going to work for PicoContainers
    that are also caching component instances. Caching was a default in
    PicoContainer 1.x, but is not for 2.x - be warned!</strong></p>

<p>Thus lifecycle implies three methods:</p>
<ul>
    <li>start</li>
    <li>stop</li>
    <li>dispose</li>
</ul>
<p>In PicoContainer we think allow a pluggable LifecycleStrategy.</p>

<h3>Startable</h3>

<p>Our own interface for startable. We wish it were in the JDK,
    because we're big into making components unencumbered by the trappings of
    containment. In English: we'd rather not make components
    implement/extend/throw anything from our framework. Its a 'transparency'
    thing.</p>

<p>Here's an example of components fitting that ideal</p>

<div class="source"><pre>public class Apple implements Startable{
  public void start() {
    // listen on socket, start thread etc.
  }
  public void stop() {
    // stop listening on socket, kill thread etc.
  }
}


...


pico = new DefaultPicoContainer(new StartableLifecycleStrategy());
pico.addComponent(Apple.class);
pico.start();
// start gets called

Apple a = pico.getComponent(Apple.class);
</pre>
</div>
<p>The StartableLifecycleStrategy can be extended if you prefer your
    own interface for Startable. Just override</p>

<h3>Reflection based start/stop/dispose</h3>

<p>This works without an interface. Instead it works via reflection,
    and appropriate method names.</p>

<div class="source"><pre>public class Apple {
  public void start() {
    // listen on socket, start thread etc.
  }
  public void stop() {
    // stop listening on socket, kill thread etc.
  }
}


...


pico = new DefaultPicoContainer(new ReflectionLifecycleStrategy());
pico.addComponent(Apple.class);
pico.start();
// start gets called

Apple a = pico.getComponent(Apple.class);
</pre>
</div>

<p>If you have other synonyms for start/stop/dispose, just extend
    the ReflectionLifecycleStrategy class and provide them.</p>

<h3>Java EE 5 annotation based start/dispose</h3>

<p>This works without an interface, but with annotations in front of the designated methods</p>

<div class="source"><pre>public class Apple {
  @PostConstruct
  public void startUp() {
    // listen on socket, start thread etc.
  }
  @PreDestroy
  public void allOver() {
    // stop listening on socket, kill thread etc.
  }
}


...


pico = new DefaultPicoContainer(new JavaEE5LifecycleStrategy());
pico.addComponent(Apple.class);
pico.start();
// start gets called

Apple a = pico.getComponent(Apple.class);
</pre>
</div>

<p>These annotations are supplied with Java 6, but come in a jar for Java 5 and below. See <a
        href="http://mvnrepository.com/artifact/javax.annotation/jsr250-api">http://mvnrepository.com/artifact/javax.annotation/jsr250-api</a>
</p>

<h3>No Lifecycle</h3>

<p>DefaultPicoContainer does sets StartableLifecycleStrategy by
    default. You can specify NullLifecycleStrategy instead if you are sure
    that no components honor any lifecycle concept..</p>

<h3>Lazy Lifecycles</h3>

<p>By default PicoContainer will start all startable (or appropriate) components when pico.start() is called.  Lazy lifecycle is where the component in question is not started when pico.start() is called, but when the first access to it happens.</p>  It is available for any concept of startable component, but can only happen if you override the the isLazy() method of those classes:

<div class="source"><pre>
pico = new DefaultPicoContainer(new StartableLifecycleStrategy() {
	@Override
	public boolean isLazy(ComponentAdapter&lt;?> adapter) {
		return true; // or something more conditional
	}
});
pico.addComponent(Apple.class);
pico.start();   // start does not get called yet
Apple a = pico.getComponent(Apple.class);    // start gets called now as part of getComponent(..)
pico.stop(); // stop all components that are startable whether lazy or not
</pre>
</div>

<h3>Custom Lifecycles</h3>

<p>Write a class that implements LifecycleStrategy, there are just
    four methods to implement. See LifecycleStrategy.</p>

<h3>Where Next?</h3>
<span class="callout">
The&nbsp;<a href="disambiguation.html">Disambiguation</a>
page outlines strategies<br/>
for dealing with choosing which of two<br/> 
potential injectables for one component</span>

<p></p>
</div>
</div>
</div>
<div class="clear"></div>
<div id="footer">
<div class="right">&#169; 2003-2008 PicoContainer Committers</div>
<div class="clear"></div>
</div>

</body>

<!--  Scripts to highlight code:  MUST be left AFTER the body -->
<script language="javascript" src="./js/shCore.js">
	//
</script>
<script language="javascript" src="./js/shBrushJava.js">
	//
</script>
<script language="javascript" src="./js/shBrushXml.js">
	//
</script>
<script type="text/javascript">
	// <![CDATA[
	var elements = document.getElementsByClassName('source');
	elements.each( function(element) {
		var content = element.getElementsByTagName('pre')[0].innerHTML;
		var classType = /^&lt;/.test(content) ? "xml" : "java";
		content = "<textarea name=\"code\" class=\"" + classType + "\">"
				+ content + "</textarea>";
		new Insertion.Before(element, content);
		element.remove(element);
	});

	dp.SyntaxHighlighter.HighlightAll('code', false, false);
	// ]]>
</script>

</html>
